!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).nlp=e()}(this,(function(){"use strict";const t=/^ *(#|\/\/)/,e=function(t){let e=t.trim().split(/->/),n=[];e.forEach((t=>{n=n.concat(function(t){if(!(t=t.trim()))return null;if(/^\[/.test(t)&&/\]$/.test(t)){let e=(t=(t=t.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return e=e.map((t=>t.trim())).filter((t=>t)),e=e.map((t=>({label:t,children:[]}))),e}return[{label:t,children:[]}]}(t))})),n=n.filter((t=>t));let r=n[0];for(let t=1;t<n.length;t+=1)r.children.push(n[t]),r=n[t];return n[0]},n=function(t){let{width:e}={width:process.stdout.columns,height:process.stdout.rows},n=function(t){let e=0,n=0;const r=function(t,i,o){i>e&&(e=i),o>n&&(n=o),t.children&&t.children.forEach(((t,e)=>{r(t,i+e,o+1)}))};return r(t,0,0),{depth:n,breadth:e}}(t);return n.width=e,n},r={ascii:function(t){let{width:e,depth:r,breadth:i}=n(t),o=function(t){let e=[];const n=function(t,r,i,o){t.x=r,t.y=i,t.size=o,e[i]=e[i]||[],e[i].push(t);let l=Math.floor(o/(t.children.length||1));t.children.forEach(((t,e)=>{n(t,r+e*l,i+1,l)}))};return n(t,0,0,100),e}(t),l=[];return o.forEach((t=>{let n=Math.floor(e/t.length),r="";t.forEach((t=>{r+=((t="",e)=>{e-=3;let n=Math.floor(e/2),r=Math.floor(t.length/2),i="".padEnd(n-r,"_");return` ${i}${t}${i} `})(t.label,n)})),l.push(r)})),l.join("\n")}},i=/\//;class o{constructor(t={}){Object.defineProperty(this,"json",{enumerable:!1,value:t,writable:!0})}get children(){return this.json.children}get label(){return this.json.label}get props(){return this.json.props||{}}set props(t){this.json.props=this.json.props||{};let e=this.json.props;"string"==typeof t&&(e[t]=!0),Object.assign(e,t)}get(t){if(t=(t||"").trim(),!i.test(t)){let e=this.children.find((e=>e.label===t));return new o(e)}let e=function(t,e){let n=function(t){return"string"!=typeof(t=t||"")?t:(t=t.replace(/^\//,"")).split(/\//)}(e);for(let e=0;e<n.length;e+=1){let r=t.children.find((t=>t.label===n[e]));if(!r)return null;t=r}return t}(this,t);return new o(e)}list(){return(t=>{let e=[],n=[t];for(;n.length>0;){let t=n.pop();e.push(t),t.children.forEach((t=>n.push(t)))}return e})(this.json)}fillDown(){return function(t){let e=t.props||{};const n=t=>{e=Object.assign({},e,t.props),t.props=e,t.children.forEach(n)};n(t)}(this.json),this}out(){return function(t,e="ascii"){return r.hasOwnProperty(e)?r[e](t):r.ascii(t)}(this.json)}}return function(n){let r={};return r="string"==typeof n?function(n){let r=n.split(/\r?\n/),i=[];return r.forEach((n=>{if(!n.trim()||t.test(n))return;let r=(t=>{const e=/^(  |\t)/;let n=0;for(;e.test(t);)t=t.replace(e,""),n+=1;return n})(n);i.push({indent:r,node:e(n)})})),function(t){let e={children:[]};return t.forEach(((n,r)=>{0===n.indent?e.children=e.children.concat(n.node):t[r-1]&&t[r-1].node.children.push(n.node)})),e}(i)}(n):n||r,new o(r)}}));
